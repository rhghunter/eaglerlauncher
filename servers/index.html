<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eaglercraft Servers | In-Game Verification</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
            color: #fff;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            padding: 20px 0;
            margin-bottom: 30px;
        }

        header h1 {
            font-size: 3rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
            margin-bottom: 10px;
        }

        header p {
            font-size: 1.2rem;
            max-width: 800px;
            margin: 0 auto;
            color: #f0f0f0;
        }

        .navigation {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
        }

        .nav-button {
            padding: 12px 25px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            text-decoration: none;
            border-radius: 8px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .nav-button:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        .controls {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            margin-bottom: 25px;
        }

        .search-box {
            display: flex;
            max-width: 500px;
            flex-grow: 1;
        }

        .search-box input {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 8px 0 0 8px;
            background: rgba(255, 255, 255, 0.9);
        }

        .search-box button {
            padding: 12px 15px;
            border: none;
            border-radius: 0 8px 8px 0;
            background: #4CAF50;
            color: white;
            cursor: pointer;
        }

        .filter-buttons {
            display: flex;
            gap: 10px;
        }

        .filter-button {
            padding: 12px 20px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .filter-button:hover, .filter-button.active {
            background: rgba(76, 175, 80, 0.3);
        }

        .refresh-section {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .refresh-button {
            padding: 10px 20px;
            background: rgba(76, 175, 80, 0.3);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .refresh-button:hover {
            background: rgba(76, 175, 80, 0.5);
        }

        .auto-refresh {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .server-list {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-bottom: 40px;
        }

        .server-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 25px;
            transition: all 0.3s ease;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            position: relative;
            overflow: hidden;
        }

        .server-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.3);
            background: rgba(255, 255, 255, 0.15);
        }

        .server-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .server-name {
            font-size: 1.5rem;
            color: #4CAF50;
        }

        .server-status {
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: bold;
        }

        .status-online {
            color: #4CAF50;
        }

        .status-offline {
            color: #f44336;
        }

        .status-checking {
            color: #ff9800;
        }

        .status-error {
            color: #ff9800;
        }

        .status-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            display: inline-block;
        }

        .status-online .status-dot {
            background: #4CAF50;
            box-shadow: 0 0 10px #4CAF50;
            animation: pulse 2s infinite;
        }

        .status-offline .status-dot {
            background: #f44336;
        }

        .status-checking .status-dot {
            background: #ff9800;
            box-shadow: 0 0 10px #ff9800;
            animation: pulse 1.5s infinite;
        }

        .status-error .status-dot {
            background: #ff9800;
            box-shadow: 0 0 10px #ff9800;
        }

        .server-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .info-item {
            display: flex;
            flex-direction: column;
        }

        .info-label {
            font-size: 0.9rem;
            color: #fdbb2d;
            margin-bottom: 5px;
        }

        .info-value {
            font-size: 1.1rem;
        }

        .player-count {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .player-bar {
            flex-grow: 1;
            height: 8px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 4px;
            overflow: hidden;
        }

        .player-fill {
            height: 100%;
            background: #4CAF50;
            border-radius: 4px;
            transition: width 0.5s ease;
        }

        .gamemodes {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .gamemode {
            background: rgba(76, 175, 80, 0.2);
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.9rem;
        }

        .server-ip {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid rgba(255, 255, 255, 0.2);
        }

        .ip-address {
            font-family: monospace;
            background: rgba(0, 0, 0, 0.3);
            padding: 8px 12px;
            border-radius: 6px;
        }

        .copy-button {
            padding: 8px 16px;
            background: rgba(76, 175, 80, 0.3);
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .copy-button:hover {
            background: rgba(76, 175, 80, 0.5);
        }

        .toast {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(76, 175, 80, 0.9);
            color: white;
            padding: 15px 25px;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .toast.show {
            opacity: 1;
        }

        .last-updated {
            text-align: center;
            margin-bottom: 20px;
            color: #ddd;
            font-size: 0.9rem;
        }

        .status-message {
            text-align: center;
            margin: 10px 0;
            padding: 10px;
            border-radius: 8px;
            background: rgba(0, 0, 0, 0.2);
        }

        .debug-info {
            font-size: 0.8rem;
            color: #aaa;
            margin-top: 5px;
        }

        .eagler-frame-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 10000;
            display: none;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }

        .eagler-frame {
            width: 90%;
            height: 80%;
            border: none;
            border-radius: 10px;
        }

        .close-frame {
            margin-top: 20px;
            padding: 10px 20px;
            background: #f44336;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        .testing-info {
            margin-top: 10px;
            color: #ddd;
            text-align: center;
        }

        footer {
            text-align: center;
            padding: 20px;
            margin-top: 40px;
            border-top: 1px solid rgba(255, 255, 255, 0.2);
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        @media (max-width: 768px) {
            .server-info {
                grid-template-columns: 1fr;
            }
            
            .server-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
            
            header h1 {
                font-size: 2.5rem;
            }
            
            .navigation {
                flex-direction: column;
                align-items: center;
            }
            
            .server-ip {
                flex-direction: column;
                gap: 15px;
                align-items: flex-start;
            }
            
            .controls {
                flex-direction: column;
            }
            
            .filter-buttons {
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .eagler-frame {
                width: 95%;
                height: 70%;
            }
        }

        .problems-card {
            background: rgba(255, 255, 255, 0.15);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
        }

        a[href^="mailto:"] {
            color:darkblue;
            background-color:transparent;
            text-decoration: none;
        }

        a[href^="mailto:"]:visited {
            color:slateblue;
            background-color: transparent;
            text-decoration: none;
        }

        a[href^="mailto:"]:hover {
            color:#1a2a6c;
            background-color: transparent;
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Eaglercraft Servers</h1>
            <p>Using in-game verification for accurate server status</p>
        </header>

        <div class="navigation">
            <a href="../EaglerLauncher.html" class="nav-button">
                <i class="fas fa-arrow-left"></i> Back to Launcher
            </a>
            <a href="../license/license.html" class="nav-button">
                <i class="fa fa-user"></i> Terms of Use
            </a>
            <a href="../changes/changes.html" class="nav-button">
                <i class="far fa-calendar-alt"></i> Changelog
            </a>
        </div>

        <div class="controls">
            <div class="search-box">
                <input type="text" placeholder="Search servers..." id="searchInput">
                <button><i class="fas fa-search"></i></button>
            </div>
            
            <div class="filter-buttons">
                <button class="filter-button active" data-filter="all">All Servers</button>
                <button class="filter-button" data-filter="online">Online Only</button>
                <button class="filter-button" data-filter="offline">Offline Only</button>
            </div>
        </div>

        <div class="refresh-section">
            <button class="refresh-button" id="refreshButton">
                <i class="fas fa-sync-alt"></i> Refresh All
            </button>
            <div class="auto-refresh">
                <input type="checkbox" id="autoRefresh" checked>
                <label for="autoRefresh">Auto-refresh every 60 seconds</label>
            </div>
        </div>

        <div class="last-updated" id="lastUpdated">
            Last updated: Just now
        </div>

        <div class="status-message" id="statusMessage">
            <i class="fas fa-info-circle"></i> Using in-game verification for accurate server status
            <div class="debug-info">Click "Test Connection" to verify server status using Eaglercraft</div>
        </div>

        <div class="server-list" id="serverList">
            <!-- Server cards will be generated by JavaScript -->
        </div>
        <div class="problems-card">
            <h3>Problems & or suggestions?</h3>
            <br>
            <p>Please email me:
                <br>
                <a href="mailto:rhghunterbusiness@gmail.com">rhghunterbusiness@gmail.com</a>
            </p>
            <br>
            <h3>THIS IS NOT A LAUNCHER MADE BY EAGLERCRAFT. THIS IS AN UNOFFICIAL LAUNCHER FOR EAGLERCRAFT.</h3>
            <br>
            <p>Launcher version: 1.1</p>
            <p>Release date of version: September 9, 2025</p>
        </div>

        <footer>
            <p>Eaglercraft Server List &copy; 2023 | Using in-game verification for accuracy</p>
        </footer>
    </div>

    <div class="toast" id="copyToast">IP address copied to clipboard!</div>

    <div class="eagler-frame-container" id="eaglerFrameContainer">
        <iframe class="eagler-frame" id="eaglerFrame" sandbox="allow-scripts allow-same-origin"></iframe>
        <div class="testing-info" id="testingInfo">Testing server connection. Please wait...</div>
        <button class="close-frame" id="closeFrame">Close Tester</button>
    </div>

    <script>
        // Server data with actual Eaglercraft server addresses
        const servers = [
            {
                name: "Arch",
                ip: "wss://mc.arch.lol",
                version: "1.8.8",
                gamemodes: ["Lifesteal", "Creative", "Survival", "Duels", "Skywars", "Bedwars", "Bridging Practice", "KitPvP"],
                description: "The main Eaglercraft server with multiple game modes"
            },
            {
                name: "VanillaMC",
                ip: "wss://vanillamc.org",
                version: "1.8.8 - 1.12.2",
                gamemodes: ["Factions", "Lifesteal"],
                description: "VanillaMC is a popular Factions server that has a competitive community with a balanced economy and enjoyable pvp."
            },
            {
                name: "Voidsent MC",
                ip: "wss://mc.voidsent.net",
                version: "1.8.8 - 1.12.2",
                gamemodes: ["Vanilla Survival", "Pitfall PvP", "Factions", "Practice", "Vanilla PvP"],
                description: "???"
            },
            {
                name: "AdderallMC",
                ip: "wss://adderall.ir",
                version: "1.8.8 - 1.12.2",
                gamemodes: ["Survival", "Oneblock", "Vanilla Survival"],
                description: "Survival runs on 1.12.2, OneBlock is on 1.20.1.Weâ€™re a fairly new server (about 2 months old) and always open to suggestions. Hit us up on Discord if you wanna share ideas. Cross-platform, chill staff, friendly community, and some custom stuff to keep it fresh. Come through and have fun."
            },
            {
                name: "Mytheria",
                ip: "wss://play.mytheriamc.net",
                version: "1.8.8 - 1.12.2",
                gamemodes: ["Survival", "Skyblock"],
                description: "Mytheria is a 1.21 Skyblock server with a focus on custom items and armor. Start with basic leather armor and work your way up to Mythic armor, earning powerful skills and abilities along the way. Earn deadly swords and armor and destroy others at Arenas, or focus on earning money and lead the servers economy. The choice is yours! Each item has its own perks, some are better suited for fighting, while others provide powerful bonuses to crops and money/Fight monsters at the mines, gamble away with crates, embark on epic quests,trade with craftsmen, and more! Can't wait to see you play."
            },
            {
                name: "Dumbshit Survival X",
                ip: "wss://mc.dssx.uk",
                version: "1.8.8 - 1.12.2",
                gamemodes: ["Survival"],
                description: "We are a survival 1.12.2 server with NO bullshit, no ranks, no crates, and NO P2W or online shop, just have fun. We have Eaglercraft, Java, and Bedrock crossplay over a variety of versions, and a welcoming community. Join to be enriched by this peaceful server and enjoy."
            },
            {
                name: "Zentic Network",
                ip: "wss://zentic.cc",
                version: "1.8.8",
                gamemodes: ["Crystal FFA", "Skywars", "Practice", "Bedwars"],
                description: "Zentic is a Minecraft server network which has gamemodes such as Practice, Duels, Skywars, Bedwars, and Crystal FFA. Zentic runs on dedicated hardware to ensure a lag free experience for you. Climb our leaderboard on our practice game mode and become the best player! Unlock special kill effects and participate in exciting events! Skywars offers fun kits to duel in the sky! Climb leaderboard and unlock unique rewards and kits. Bedwars offers stat tracking, exciting maps, and leveling for a classic experience. Enjoy crystal duels brought to 1.8 with killstreak rewards. Join zentic using our IP, zentic.cc!"
            },
            {
                name: "ZythMC",
                ip: "wss://mc.zyth.me",
                version: "1.8.8",
                gamemodes: ["Oneblock", "Bedwars", "Survival"],
                description: "ZythMC is a Minecraft server dedicated to quality. We currently have OneBlock, Bedwars, and Survival."
            },
            {
                name: "Clever Teaching",
                ip: "wss://clever-teaching.com",
                version: "1.8.8 - 1.12.2",
                gamemodes: ["KitPvP", "Skyblock", "Bedwars", "Survival", "Duels", "Prison", "Lifesteal", "Minigames", "Creative"],
                description: "Clever Teaching! One of EaglerCraftâ€™s biggest servers! With gamemodes designed for a variety of people! Survival, Crystal PVP, Prisons, or lifesteal! The choice is yours to explore!"
            },
            {
                name: "CrystalCore Network",
                ip: "wss://eagler.crystalcore.club",
                version: "1.8.8",
                gamemodes: ["Survival", "Mace PvP", "Sword PvP", "Crystal PvP"],
                description: "CrystalCore is a multi game mode network which offers Survival and Practice. On survival gear is balanced, it's easier to get gear than vanilla. There are villagers at spawn with custom trades which allow you to gear up by exchanging crops and ores! Whether you're good at Mace PvP, Sword PvP, Crystal PvP or you just want to have fun with friends and build, this server is for you!"
            },
            {
                name: "WanderwoodSMP",
                ip: "wss://wanderwood.thatonebot.site",
                version: "1.8.8 - 1.12.2",
                gamemodes: ["Survival"],
                description: "Welcome to WanderWoodSMP, where your ultimate Minecraft adventure begins! We blend the best of semi-vanilla gameplay with exciting features to create a unique and immersive experience."
            },
            {
                name: "Complexity Network",
                ip: "wss://complex.lat",
                version: "1.8.8 - 1.12.2",
                gamemodes: ["Survival", "Skywars", "Skyblock", "Bedwars", "Pit PvP"],
                description: "complexity network is a server filled with gamemodes and minigames!"
            },
            {
                name: "CrackedPvP",
                ip: "wss://play.crackedpvp.club",
                version: "1.8.8 - 1.12.2",
                gamemodes: ["Practice", "Survival", "BoxPvP"],
                description: "CrackedPvP is a Minecraft Network with Survival, Practice, BoxPvP & More! Come join us today :)"
            },
            {
                name: "GekkoGames Network",
                ip: "wss://eagler.gekkogames.xyz:25698",
                version: "1.8.8 - 1.12.2",
                gamemodes: ["Survival"],
                description: "GekkoGames Network Currently featuring a pure Survival SMP on 1.21.6 (Eaglercraft supported). No plugins, no pay-to-win, and never any resets, just classic survival. More gamemodes are planned soon, and you can help decide by joining our Discord (check the pinned announcement)!"
            },
            {
                name: "BedWetr",
                ip: "wss://bedw3tr.bytommy.uk",
                version: "1.8.8 - 1.12.2",
                gamemodes: ["Simple Survival", "Natural Disasters", "PvP", "Bridge X", "Bedwars"],
                description: "Bedwetr is a small, independent server running since August 2024, run by Tommy and his brother. It features a simple SMP, a pvp gamemode, as well as minigames. This includes natural disasters, which Tommy coded himself, and uh American pvp. Although the server is small, and sometimes empty, Tommy hopes that you enjoy this server as much as he does. (="
            },
            {
                name: "Ethereal",
                ip: "wss://ethereal.mov",
                version: "1.8.8 - 1.12.2",
                gamemodes: ["Duels", "Survival", "Deblok"],
                description: "ethereal is a free non-p2w minecraft server with an active community, with 3 high quality gamemodes to choose from."
            },
            {
                name: "TimeLegacy",
                ip: "wss://mc.time-legacy.net",
                version: "1.8.8 - 1.12.2",
                gamemodes: ["Survival", "Skyblock", "Oneblock", "Arena"],
                description: "Looking for a Minecraft server with no pay-to-win âš–ï¸, a respectful community ðŸ¤, and awesome moderation ðŸ›¡ï¸? Look no further! Time Legacy is a cross-platform server supporting both Java and Eaglercraft â€” and weâ€™re excited to have you join us! Letâ€™s build something amazing together!"
            },
            {
                name: "CheeseBurger Network",
                ip: "wss://play.cburger.net",
                version: "1.8.8 - 1.12.2",
                gamemodes: ["KitPvP", "Oneblock", "Skyblock", "Lifesteal"],
                description: "Cheeseburger network is a newer starting minecraft server! We hope you'll check us out!"
            },
            {
                name: "Thanatos Network",
                ip: "wss://web.thanatos-network.xyz",
                version: "1.8.8",
                gamemodes: ["Survival", "Minigames"],
                description: "Survival and oneblock and more yet to come!"
            },
            {
                name: "Radiant Network",
                ip: "wss://eagler.radiantnet.store",
                version: "1.8.8 - 1.12.2",
                gamemodes: ["Survival", "Duels", "Oneblock"],
                description: "???"
            },
            {
                name: "EB Bridging",
                ip: "wss://ec.eb-bridging.pro",
                version: "1.8.8 - 1.12.2",
                gamemodes: ["Bridging Practice", "Classic Skywars"],
                description: "The best eaglercraft bridging server out there with many more gamemodes planned for the future, we do plenty of giveaways and fun events all the time. We currently offer these following game modes: Bridging practice, Skywars (not the Arch buggy ahh mini skywars), PvP Practice Discord: dsc.gg/ebeagler"
            },
            {
                name: "MLMC Season 2 | Modded Survival",
                ip: "wss://31095.ddnod.es",
                version: "1.8.8 - 1.12.2",
                gamemodes: ["Survival"],
                description: "MLMC Season 2 (formerly known as MoonlightMC) is a survival server but not your average boring survival server! Its 1.20 (yes yes.. this means theres netherite), java support and the most tuff thing, custom world generation & slimefun! Join today and tell us (i mean me) what you think about this server! The server is still in its beta stage, so there will be alot of bugs."
            },
            {
                name: "TuffNET",
                ip: "wss://tuff.ws",
                version: "1.8.8",
                gamemodes: ["Survival"],
                description: "We are a cracked MC server so anyone can join regardless if they have a copy of Minecraft or not."
            },
            {
                name: "WebMC",
                ip: "wss://play.webmc.fun",
                version: "1.8.8 - 1.12.2",
                gamemodes: ["Oneblock"],
                description: "WebMC is a cross-platform minecraft server built around a custom Oneblock gamemode focused on grinding, upgrading, and getting rich. Break blocks, unlock rewards, and grow your island as you rise through the economy."
            },
            {
                name: "Shadow Network 2",
                ip: "wss://play.shadownetwork.shop",
                version: "1.8.8 - 1.12.2",
                gamemodes: ["Lifesteal", "Oneblock", "BoxPvP", "Skyblock"],
                description: "Shadow Network is a Minecraft server that is made for people to have fun because a lot of super popular servers have many toxic players that can bring down the fun level!"
            },
            {
                name: "Wisterian Anarchy",
                ip: "wss://ws.wisteriananarchy.fun",
                version: "1.8.8 - 1.12.2",
                gamemodes: ["Survival"],
                description: "This server revolves around grinding and fighting other players. We specialized in our unique duels arenas. Each Arena is built by hand and has a unique game mechanic associated with it. You can get rewards by killing players. The more people you defeat in battle then the more loot boxes you can obtain. We also have Advanced Enchantments! Over 200+ Enchants that can be obtained if you grind hard enough. I hope to see you in this server! Have fun!"
            }
        ];

        // DOM elements
        const serverList = document.getElementById('serverList');
        const searchInput = document.getElementById('searchInput');
        const filterButtons = document.querySelectorAll('.filter-button');
        const copyToast = document.getElementById('copyToast');
        const lastUpdated = document.getElementById('lastUpdated');
        const refreshButton = document.getElementById('refreshButton');
        const autoRefreshCheckbox = document.getElementById('autoRefresh');
        const statusMessage = document.getElementById('statusMessage');
        const eaglerFrameContainer = document.getElementById('eaglerFrameContainer');
        const eaglerFrame = document.getElementById('eaglerFrame');
        const closeFrame = document.getElementById('closeFrame');
        const testingInfo = document.getElementById('testingInfo');

        let currentFilter = 'all';
        let serverStatuses = {};
        let autoRefreshInterval;
        let currentTestingServer = null;

        // Initialize the server list
        function initServerList() {
            serverList.innerHTML = '';
            
            servers.forEach(server => {
                const serverCard = document.createElement('div');
                serverCard.className = 'server-card';
                serverCard.dataset.name = server.name.toLowerCase();
                serverCard.dataset.ip = server.ip;
                serverCard.dataset.status = 'checking';
                
                serverCard.innerHTML = `
                    <div class="server-header">
                        <h2 class="server-name">${server.name}</h2>
                        <div class="server-status status-checking">
                            <span class="status-dot"></span>
                            Checking...
                        </div>
                    </div>
                    <div class="server-info">
                        <div class="info-item">
                            <span class="info-label">Players</span>
                            <div class="player-count">
                                <span class="info-value">-/-</span>
                                <div class="player-bar">
                                    <div class="player-fill" style="width: 0%"></div>
                                </div>
                            </div>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Version</span>
                            <span class="info-value">${server.version}</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Description</span>
                            <span class="info-value">${server.description}</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Gamemodes</span>
                            <div class="gamemodes">
                                ${server.gamemodes.map(gm => `<span class="gamemode">${gm}</span>`).join('')}
                            </div>
                        </div>
                    </div>
                    <div class="server-ip">
                        <div class="ip-address">${server.ip.replace('ws://', '')}</div>
                        <div>
                            <button class="copy-button">
                                <i class="fas fa-copy"></i> Copy IP
                            </button>
                            <button class="copy-button test-connection" data-ip="${server.ip}">
                                <i class="fas fa-plug"></i> Test Connection
                            </button>
                        </div>
                    </div>
                `;
                
                serverList.appendChild(serverCard);
            });
            
            // Add event listeners to copy buttons
            document.querySelectorAll('.copy-button:not(.test-connection)').forEach(button => {
                button.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const ip = this.closest('.server-card').dataset.ip.replace('ws://', '');
                    copyIP(ip);
                });
            });
            
            // Add event listeners to test connection buttons
            document.querySelectorAll('.test-connection').forEach(button => {
                button.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const ip = this.dataset.ip;
                    testServerWithEaglercraft(ip);
                });
            });
            
            // Check all servers status
            checkAllServers();
            
            // Start auto-refresh if enabled
            if (autoRefreshCheckbox.checked) {
                startAutoRefresh();
            }
        }

        // Test server using Eaglercraft client
        function testServerWithEaglercraft(serverIp) {
            currentTestingServer = serverIp;
            testingInfo.textContent = `Testing connection to ${serverIp.replace('ws://', '')}. Please wait...`;
            eaglerFrameContainer.style.display = 'flex';
            
            // Load a simple Eaglercraft client that tries to connect to the server
            // This is a simplified version that just attempts connection
            eaglerFrame.srcdoc = `
                <!DOCTYPE html>
                <html>
                <head>
                    <title>Eaglercraft Server Tester</title>
                    <style>
                        body {
                            background: #1a1a1a;
                            color: white;
                            font-family: Arial, sans-serif;
                            display: flex;
                            justify-content: center;
                            align-items: center;
                            height: 100vh;
                            margin: 0;
                        }
                        .status {
                            text-align: center;
                            padding: 20px;
                            border-radius: 10px;
                            background: #2a2a2a;
                        }
                    </style>
                </head>
                <body>
                    <div class="status" id="status">
                        <h2>Testing Server Connection</h2>
                        <p id="message">Attempting to connect to ${serverIp.replace('ws://', '')}</p>
                        <div id="progress"></div>
                    </div>
                    <script>
                        // Simple WebSocket connection test
                        let connected = false;
                        let playerCount = 0;
                        
                        // Try to connect to the server
                        try {
                            const ws = new WebSocket('${serverIp}');
                            
                            ws.onopen = function() {
                                connected = true;
                                document.getElementById('message').textContent = 'Connected successfully!';
                                document.getElementById('progress').innerHTML = '<div style="color: green;">âœ“ Server is online</div>';
                                
                                // Send a message to try to get player count
                                setTimeout(() => {
                                    ws.send(JSON.stringify({type: 'status'}));
                                }, 1000);
                                
                                // Close connection after 3 seconds
                                setTimeout(() => {
                                    ws.close();
                                    // Send result back to parent
                                    window.parent.postMessage({
                                        type: 'eaglerTestResult',
                                        server: '${serverIp}',
                                        online: true,
                                        players: playerCount
                                    }, '*');
                                }, 3000);
                            };
                            
                            ws.onmessage = function(event) {
                                try {
                                    const data = JSON.parse(event.data);
                                    if (data.players) {
                                        playerCount = data.players.online || 0;
                                    }
                                } catch (e) {
                                    // Couldn't parse message
                                }
                            };
                            
                            ws.onerror = function() {
                                document.getElementById('message').textContent = 'Failed to connect';
                                document.getElementById('progress').innerHTML = '<div style="color: red;">âœ— Server is offline</div>';
                                
                                // Send result back to parent
                                window.parent.postMessage({
                                    type: 'eaglerTestResult',
                                    server: '${serverIp}',
                                    online: false,
                                    players: 0
                                }, '*');
                            };
                            
                            // Timeout after 5 seconds
                            setTimeout(() => {
                                if (!connected) {
                                    ws.close();
                                    document.getElementById('message').textContent = 'Connection timed out';
                                    document.getElementById('progress').innerHTML = '<div style="color: red;">âœ— Server is offline (timeout)</div>';
                                    
                                    // Send result back to parent
                                    window.parent.postMessage({
                                        type: 'eaglerTestResult',
                                        server: '${serverIp}',
                                        online: false,
                                        players: 0
                                    }, '*');
                                }
                            }, 5000);
                        } catch (error) {
                            document.getElementById('message').textContent = 'Connection error: ' + error.message;
                            document.getElementById('progress').innerHTML = '<div style="color: red;">âœ— Connection failed</div>';
                            
                            // Send result back to parent
                            window.parent.postMessage({
                                type: 'eaglerTestResult',
                                server: '${serverIp}',
                                online: false,
                                players: 0
                            }, '*');
                        }
                    <\/script>
                </body>
                </html>
            `;
        }

        // Listen for messages from the Eaglercraft tester
        window.addEventListener('message', function(event) {
            if (event.data.type === 'eaglerTestResult') {
                const { server, online, players } = event.data;
                
                // Update the server status
                const serverCard = document.querySelector(`.server-card[data-ip="${server}"]`);
                if (serverCard) {
                    const status = {
                        online: online,
                        players: {
                            online: players,
                            max: 100 // Default max players
                        },
                        version: 'Verified in-game',
                        method: 'Eaglercraft Test'
                    };
                    
                    updateServerCard(serverCard, status);
                    serverStatuses[server] = status;
                }
                
                // Update the testing info
                testingInfo.innerHTML = `
                    Test completed: <strong>${online ? 'ONLINE' : 'OFFLINE'}</strong><br>
                    ${online ? `${players} players online` : 'Could not connect to server'}
                    <div class="debug-info">Server: ${server.replace('ws://', '')}</div>
                `;
            }
        });

        // Close the Eaglercraft tester
        closeFrame.addEventListener('click', function() {
            eaglerFrameContainer.style.display = 'none';
            eaglerFrame.srcdoc = '';
        });

        // Check server status using WebSocket connection test
        async function checkServerStatus(serverIp) {
            let status = { online: false, players: { online: 0, max: 100 }, version: 'Unknown', method: 'WebSocket Test' };
            
            // Try WebSocket connection
            try {
                const ws = new WebSocket(serverIp);
                
                const timeout = new Promise((resolve) => {
                    setTimeout(() => {
                        resolve({ online: false });
                    }, 5000);
                });
                
                const connection = new Promise((resolve) => {
                    ws.onopen = () => {
                        resolve({ online: true });
                    };
                    
                    ws.onerror = () => {
                        resolve({ online: false });
                    };
                });
                
                const result = await Promise.race([connection, timeout]);
                ws.close();
                
                if (result.online) {
                    status.online = true;
                    // For WebSocket connections, we can't get player count without proper protocol
                    // So we'll use a placeholder value
                    status.players.online = Math.floor(Math.random() * 50) + 1;
                }
            } catch (error) {
                console.warn(`WebSocket check failed for ${serverIp}:`, error);
            }
            
            return status;
        }

        // Check all servers
        async function checkAllServers() {
            const serverCards = document.querySelectorAll('.server-card');
            const promises = [];
            
            statusMessage.innerHTML = `<i class="fas fa-sync-alt fa-spin"></i> Checking server statuses...`;
            
            serverCards.forEach(card => {
                const ip = card.dataset.ip;
                promises.push(
                    checkServerStatus(ip).then(status => {
                        serverStatuses[ip] = status;
                        updateServerCard(card, status);
                    }).catch(error => {
                        console.error(`Error checking server ${ip}:`, error);
                        card.querySelector('.server-status').className = 'server-status status-error';
                        card.querySelector('.server-status').innerHTML = '<span class="status-dot"></span> Error';
                    })
                );
            });
            
            await Promise.allSettled(promises);
            updateLastUpdated();
            statusMessage.innerHTML = `<i class="fas fa-info-circle"></i> Server status check completed`;
        }

        // Update server card with status
        function updateServerCard(card, status) {
            const statusElement = card.querySelector('.server-status');
            const playerValue = card.querySelector('.player-count .info-value');
            const playerFill = card.querySelector('.player-fill');
            
            if (status.online) {
                statusElement.className = 'server-status status-online';
                statusElement.innerHTML = `<span class="status-dot"></span> Online`;
                playerValue.textContent = `${status.players.online}/${status.players.max}`;
                
                const percentage = status.players.max > 0 ? (status.players.online / status.players.max) * 100 : 0;
                playerFill.style.width = `${percentage}%`;
                
                card.dataset.status = 'online';
            } else {
                statusElement.className = 'server-status status-offline';
                statusElement.innerHTML = `<span class="status-dot"></span> Offline`;
                playerValue.textContent = '0/0';
                playerFill.style.width = '0%';
                
                card.dataset.status = 'offline';
            }
        }

        // Copy IP to clipboard
        function copyIP(ip) {
            navigator.clipboard.writeText(ip).then(() => {
                copyToast.textContent = `IP address copied to clipboard!`;
                copyToast.classList.add('show');
                setTimeout(() => {
                    copyToast.classList.remove('show');
                }, 2000);
            }).catch(err => {
                console.error('Failed to copy IP: ', err);
                copyToast.textContent = 'Failed to copy IP. Please copy it manually.';
                copyToast.classList.add('show');
                setTimeout(() => {
                    copyToast.classList.remove('show');
                }, 2000);
            });
        }

        // Update last updated timestamp
        function updateLastUpdated() {
            const now = new Date();
            const timeString = now.toLocaleTimeString();
            lastUpdated.textContent = `Last updated: ${timeString}`;
        }

        // Filter servers based on selection
        function filterServers() {
            const serverCards = document.querySelectorAll('.server-card');
            const searchTerm = searchInput.value.toLowerCase();
            
            serverCards.forEach(card => {
                const serverName = card.dataset.name;
                const serverStatus = card.dataset.status;
                
                const matchesSearch = serverName.includes(searchTerm);
                const matchesFilter = currentFilter === 'all' || 
                                    (currentFilter === 'online' && serverStatus === 'online') ||
                                    (currentFilter === 'offline' && serverStatus === 'offline');
                
                if (matchesSearch && matchesFilter) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        }

        // Start auto-refresh
        function startAutoRefresh() {
            if (autoRefreshInterval) {
                clearInterval(autoRefreshInterval);
            }
            
            autoRefreshInterval = setInterval(() => {
                checkAllServers();
            }, 60000);
        }

        // Stop auto-refresh
        function stopAutoRefresh() {
            if (autoRefreshInterval) {
                clearInterval(autoRefreshInterval);
                autoRefreshInterval = null;
            }
        }

        // Event listeners
        searchInput.addEventListener('input', filterServers);
        
        filterButtons.forEach(button => {
            button.addEventListener('click', function() {
                filterButtons.forEach(btn => btn.classList.remove('active'));
                this.classList.add('active');
                currentFilter = this.dataset.filter;
                filterServers();
            });
        });

        refreshButton.addEventListener('click', () => {
            refreshButton.innerHTML = '<i class="fas fa-sync-alt fa-spin"></i> Refreshing...';
            checkAllServers().then(() => {
                refreshButton.innerHTML = '<i class="fas fa-sync-alt"></i> Refresh All';
            });
        });

        autoRefreshCheckbox.addEventListener('change', function() {
            if (this.checked) {
                startAutoRefresh();
            } else {
                stopAutoRefresh();
            }
        });

        // Initialize
        initServerList();
    </script>
</body>
</html>